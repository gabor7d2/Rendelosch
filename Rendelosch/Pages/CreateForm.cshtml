@page
@using Rendelosch.Models
@model Rendelosch.Pages.CreateForm

@{
    ViewData["Title"] = "CreateForm";
}

<div class="container-lg mt-4">
    <form method="post">
        <div class="card">
            <div class="card-body d-flex flex-column">
                <div class="d-flex flex-row">
                    <label>Űrlap neve:</label>
                    <input type="text" class="ms-2"/>
                </div>
                <div id="fields" class="mt-4 d-flex flex-column gap-2"></div>
                <div class="d-flex flex-row mt-4 gap-2">
                    <input type="text" id="field_id" placeholder="ID"/>
                    <input type="text" id="field_name" placeholder="Megnevezés"/>
                    <button type="button" class="btn btn-outline-primary" onclick="addField()">
                        Új mező hozzáadása
                    </button>
                </div>
                <div>
                    <input class="btn btn-primary mt-4" type="submit"/>
                </div>
            </div>
        </div>
    </form>
</div>

<script>
    function addField() {
        // Get input fields
        const input_id = document.getElementById("field_id"); // ID of the field
        const input_name = document.getElementById("field_name"); // Name of the field
        const fields = document.getElementById("fields"); // Div for displayed fields
        
        // Displayed field
        const field_div = document.createElement("div");
        field_div.innerHTML = "<p class='mb-0'>" + input_name.value + " (ID: " + input_id.value + ")</p>";
        fields.appendChild(field_div);
        
        // Hidden input field for each created fields
        const field_hidden = document.createElement("input");
        field_hidden.type = "hidden";
        field_hidden.name = "fields";
        field_hidden.value = input_id.value + ";" + input_name.value;
        field_div.appendChild(field_hidden);
        
        // Clear input fields
        input_id.value = "";
        input_name.value = "";
    }
</script>